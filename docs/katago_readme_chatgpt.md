# 🎯 KataGo 棋譜検索ツール 使い方ガイド

このツールは、KataGo の自己対戦棋譜（katago-rating-games）を検索・閲覧できるアプリです。

- 棋譜フォルダを指定するだけですぐ使えます！
- 碁盤の左にある棋譜リストから選んで再生できます。
- ホイールで手順の進行もカンタン操作！
- 最終手の背景色で、KataGoの形勢判断が見えます（グレー＝互角）

## 🖱️ 基本の操作

- **範囲指定：** 碁盤をドラッグして検索範囲を指定
  - 右ドラッグで「除外」指定もできます
  - 複数の範囲を組み合わせOK！
- **編集モード：**
  - 右クリックで石を置く（何度か押すと色が変わる）
  - 灰色の石 → 黒 or 白どちらかあればヒット
  - 「×」付きの石 → その石が**置かれていたらアウト！**

## 🔍 検索機能

- **検索ボタン：** 現在の指定にマッチする棋譜を検索
- **検索結果：** 別リストに表示。クリックで閲覧可能
- **スピンボックス：**
  - 上：検索結果の表示開始手数
  - 下：マッチした局面の前後何手を表示するか

- **除外検索：** マッチしなかった棋譜で再検索
- **絞り込み検索：** 検索結果の中でさらに検索

### ⚠ 厳密検索（非推奨）

- 抜き跡に着手された局面もヒット対象になる
- 重い！とにかく重い！（そして ×石未対応）

### 🔄 反転検索

- マッチしなかった棋譜だけを抽出
- 位置ジャンプなし（フィルター目的向け）

## 🧩 グルーピング機能

- A～D ボタンで石をグループ化可能！
- 各グループから **1つだけ** 石があればヒットとみなされます。

⚠ 厳密検索ではグループ無効になります  
⚠ 「×」石でもグルーピングOKです！

## 🎓 検索テクニック

### 💡 例1：ハサミ手を検索したい！

- 黒星、白カカリのあと、ハサミ候補全てに黒石を置いてグループ化！

（画像つき）🖼️

### 💡 例2：特定の一手が打たれなかった局面だけ検索したい！

1. その一手を打ったパターンを作って検索
2. ヒット結果に「除外検索」！

→ **“打たれなかった”局面だけが残る！**

## 📋 SGF取得機能

- 棋譜を選んで「SGF取得ボタン」でコピー
- Ctrl+クリックで複数選択可能
- Ctrl+A で全選択もOK
- クリップボードにマージしたSGFをコピーします

💾 保存ボタン → `save/` フォルダに保存（次回も読み込み可能）

## ▶️ 自動再生モード

- チェックを入れると棋譜を自動再生
- 待ち時間は3本のスライダーで調整：
  1. 基本待ち時間（100〜10000ms）
  2. 形勢差で加算
  3. 手の位置の遠さで加算
- → 最終的な待ち時間は3つの合計！

## 🧱 レイアウト編集

- Ctrlを**ダブルクリック**でレイアウト編集モード
- エリアを掴んで移動、他と入れ替えもできます！

⚠ バグったら `area.var` を削除すればリセット！

## ⚠ 注意事項

- 起動直後は棋譜読み込み中 → 最初の検索が少し遅いです
- 厳密検索はめちゃくちゃ重いのでご注意！

## 📬 連絡先・アップデート

- 要望・不具合などあれば → [sphosino@gmail.com](mailto:sphosino@gmail.com)
- 最新版はこちら → [GitHubリポジトリ](https://github.com/sphosino/katago-kifu-search)

## 🐾 たのしいKataGoライフを！

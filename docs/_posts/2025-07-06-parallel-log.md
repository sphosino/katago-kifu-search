---
title: "並列化するかー"
date: 2025-07-06
layout: post
---

並列化についに手を出そうと思う。
やっぱり読み込みが遅すぎるから。

メモリ限界のせいで、アロケータを導入したが、アロケータ経由のプロパティ書き込みも遅さを際立たせている。

プロセスをわけて、sdimにもどしたら解決すると思われ。つまり２プロセス動かすだけでもめち速（当社比）なんじゃないだろうか？

じゃあアロケータって何の意味あったんだよ・・・て思った。俺は何をしてたんだ・・・・？（笑）(泣)

hspのcpu使用率って頑張ってるとき５－７％ぐらいだから、　やるとしても、プロセスは３つまで起動させることにして、２０％に抑えたい。
それでどれぐらいのパフォーマンスになるんだろう。今は想像もつかない。

2025/07/31: 追記
  並列化はしたけどsdimには戻さずにアロケータのまま。単にめんどくさかっただけだけど。

  それでもめちゃくちゃ速くなった！！！
  
  並列化しても１プロセス当たりの上限があるようで、１９０００棋譜当たりが上限になった。
  
  シングルプロセスの時は２９０００棋譜付近が上限だったがなぜか下がっちゃった。
  
  親プロセス通信用のバッファ確保とかが影響してるのかな？原因はよくわからない。
  
  てなわけで、sdim戻しは更にメモリ圧迫すると思われるのでなしの方向で。
 

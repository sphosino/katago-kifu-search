#module
#defcfunc get_auto_cores int p1
	c = p1
	if p1 = 0: c = sysinfo(17)
	tmp = c - 1 //親プロセス分-1
	if tmp <= 7: return 1 + tmp / 2 
	return 3 + (tmp - 1) / 3
#global


#if 001
#ifdef _debug
repeat 30
	logmes "" +cnt+" ->"+ get_auto_cores(cnt)
loop
#endif
#endif